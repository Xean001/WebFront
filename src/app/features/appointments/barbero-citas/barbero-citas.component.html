<div class="appointments-container">
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <div class="hero-text">
                <h1 class="hero-title">Mis Citas</h1>
                <p class="hero-subtitle">Gestiona tus citas como barbero</p>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats-section">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-card" (click)="filtrarPorEstado('TODAS')" [class.active]="filtroEstado === 'TODAS'">
                    <div class="stat-icon">üìã</div>
                    <div class="stat-info">
                        <div class="stat-number">{{ contadores.todas }}</div>
                        <div class="stat-label">Todas</div>
                    </div>
                </div>
                <div class="stat-card" (click)="filtrarPorEstado('CONFIRMADA')"
                    [class.active]="filtroEstado === 'CONFIRMADA'">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-info">
                        <div class="stat-number">{{ contadores.confirmadas }}</div>
                        <div class="stat-label">Confirmadas</div>
                    </div>
                </div>
                <div class="stat-card" (click)="filtrarPorEstado('PENDIENTE')"
                    [class.active]="filtroEstado === 'PENDIENTE'">
                    <div class="stat-icon">‚è≥</div>
                    <div class="stat-info">
                        <div class="stat-number">{{ contadores.pendientes }}</div>
                        <div class="stat-label">Pendientes</div>
                    </div>
                </div>
                <div class="stat-card" (click)="filtrarPorEstado('COMPLETADA')"
                    [class.active]="filtroEstado === 'COMPLETADA'">
                    <div class="stat-icon">üéâ</div>
                    <div class="stat-info">
                        <div class="stat-number">{{ contadores.completadas }}</div>
                        <div class="stat-label">Completadas</div>
                    </div>
                </div>
                <div class="stat-card" (click)="filtrarPorEstado('CANCELADA')"
                    [class.active]="filtroEstado === 'CANCELADA'">
                    <div class="stat-icon">‚ùå</div>
                    <div class="stat-info">
                        <div class="stat-number">{{ contadores.canceladas }}</div>
                        <div class="stat-label">Canceladas</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Loading State -->
    <div class="loading-state" *ngIf="cargando">
        <div class="spinner"></div>
        <p>Cargando tus citas...</p>
    </div>

    <!-- Appointments Grid -->
    <section class="appointments-section" *ngIf="!cargando">
        <div class="container">
            <!-- Appointments List -->
            <div class="appointments-grid" *ngIf="citasFiltradas.length > 0">
                <div class="appointment-card" *ngFor="let cita of citasFiltradas"
                    [class]="'status-' + cita.estado.toLowerCase()">
                    <!-- Status Badge -->
                    <div class="status-badge" [class]="'badge-' + cita.estado.toLowerCase()">
                        {{ cita.estado }}
                    </div>

                    <!-- Card Header -->
                    <div class="card-header">
                        <h3 class="barberia-name">{{ cita.nombreBarberia }}</h3>
                        <div class="reservation-code">ID: {{ cita.codigoReserva }}</div>
                    </div>

                    <!-- Card Body -->
                    <div class="card-body">
                        <!-- Date & Time -->
                        <div class="detail-row">
                            <div class="detail-item">
                                <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                    <line x1="16" y1="2" x2="16" y2="6"></line>
                                    <line x1="8" y1="2" x2="8" y2="6"></line>
                                    <line x1="3" y1="10" x2="21" y2="10"></line>
                                </svg>
                                <div>
                                    <div class="detail-label">Fecha</div>
                                    <div class="detail-value">{{ cita.fecha }}</div>
                                </div>
                            </div>
                            <div class="detail-item">
                                <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <polyline points="12 6 12 12 16 14"></polyline>
                                </svg>
                                <div>
                                    <div class="detail-label">Hora</div>
                                    <div class="detail-value">{{ cita.horaInicio }}</div>
                                </div>
                            </div>
                        </div>

                        <!-- Service & Client -->
                        <div class="detail-row">
                            <div class="detail-item">
                                <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path
                                        d="M15 9h.01M9 9h.01M12 14c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3z">
                                    </path>
                                    <path
                                        d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z">
                                    </path>
                                </svg>
                                <div>
                                    <div class="detail-label">Servicio</div>
                                    <div class="detail-value">{{ cita.nombreServicio }}</div>
                                </div>
                            </div>
                            <div class="detail-item">
                                <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                                <div>
                                    <div class="detail-label">Cliente</div>
                                    <div class="detail-value">{{ cita.nombreCliente }}</div>
                                </div>
                            </div>
                        </div>

                        <!-- Duration -->
                        <div class="detail-item full-width">
                            <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            <div>
                                <div class="detail-label">Duraci√≥n</div>
                                <div class="detail-value">{{ cita.duracionMinutos }} minutos ({{ cita.horaInicio }} - {{
                                    cita.horaFin }})</div>
                            </div>
                        </div>

                        <!-- Price -->
                        <div class="price-section">
                            <span class="price-label">Precio:</span>
                            <span class="price-value">S/{{ cita.precio }}</span>
                        </div>

                        <!-- Observations -->
                        <div class="observations" *ngIf="cita.observaciones">
                            <div class="observation-icon">üí¨</div>
                            <p>{{ cita.observaciones }}</p>
                        </div>
                    </div>

                    <!-- Card Footer -->
                    <div class="card-footer">
                        <button class="action-btn primary" (click)="confirmarCita(cita.idCita)"
                            *ngIf="cita.estado === 'PENDIENTE'">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                            Confirmar
                        </button>
                        <button class="action-btn success" (click)="completarCita(cita.idCita)"
                            *ngIf="cita.estado === 'CONFIRMADA'">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                <polyline points="22 4 12 14.01 9 11.01"></polyline>
                            </svg>
                            Completar
                        </button>
                        <button class="action-btn cancel" (click)="cancelarCita(cita.idCita)"
                            *ngIf="cita.estado === 'CONFIRMADA' || cita.estado === 'PENDIENTE'">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="15" y1="9" x2="9" y2="15"></line>
                                <line x1="9" y1="9" x2="15" y2="15"></line>
                            </svg>
                            Cancelar
                        </button>
                        <button class="action-btn disabled" disabled
                            *ngIf="cita.estado === 'CANCELADA' || cita.estado === 'COMPLETADA'">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                            {{ cita.estado === 'COMPLETADA' ? 'Completada' : 'Cancelada' }}
                        </button>
                    </div>
                </div>
            </div>

            <!-- Empty State -->
            <div class="empty-state" *ngIf="citasFiltradas.length === 0">
                <div class="empty-icon">üì≠</div>
                <h3>No hay citas</h3>
                <p *ngIf="filtroEstado === 'TODAS'">No tienes citas programadas</p>
                <p *ngIf="filtroEstado !== 'TODAS'">No hay citas en estado {{ filtroEstado.toLowerCase() }}</p>
            </div>
        </div>
    </section>
</div>