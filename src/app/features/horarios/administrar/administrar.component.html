<div class="admin-container">
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-content">
      <h1 class="hero-title">Gestionar Horarios</h1>
      <p class="hero-subtitle">Administra los horarios de apertura y cierre de tus barberías</p>
    </div>
  </section>

  <!-- Admin Section -->
  <section class="admin-section">
    <div class="container">
      <!-- Barbería Selection -->
      <div class="admin-header">
        <label class="form-label" style="display: block; margin-bottom: 0.5rem;">Selecciona una Barbería <span class="required">*</span></label>
        <select class="filter-select" [(ngModel)]="barberiaSeleccionada" (change)="onBarberiaChange()">
          <option [value]="null">-- Selecciona una barbería --</option>
          <option *ngFor="let barberia of barberias" [value]="barberia.idBarberia">
            {{ barberia.nombre }} ({{ barberia.ciudad }})
          </option>
        </select>
      </div>

      <!-- Form Section -->
      <section class="form-section" *ngIf="barberiaSeleccionada && mostrarFormulario">
        <div class="form-container">
          <div class="form-header">
            <h2 class="form-title">{{ editandoId ? 'Editar Horario' : 'Crear Nuevo Horario' }}</h2>
          </div>
          <form [formGroup]="formulario" class="form-content">
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Día de la Semana <span class="required">*</span></label>
                <select class="form-input" formControlName="diaSemana">
                  <option value=""> Selecciona un día </option>
                  <option *ngFor="let dia of dias" [value]="dia.valor">{{ dia.nombre }}</option>
                </select>
                <div class="error-message" *ngIf="campoDia?.invalid && campoDia?.touched">
                  Debes seleccionar un día
                </div>
              </div>
              <div class="form-group">
                <label class="form-label">Hora de Apertura <span class="required">*</span></label>
                <input type="time" class="form-input" formControlName="horaApertura">
                <div class="error-message" *ngIf="campoHoraApertura?.invalid && campoHoraApertura?.touched">
                  La hora de apertura es requerida
                </div>
              </div>
              <div class="form-group">
                <label class="form-label">Hora de Cierre <span class="required">*</span></label>
                <input type="time" class="form-input" formControlName="horaCierre">
                <div class="error-message" *ngIf="campoHoraCierre?.invalid && campoHoraCierre?.touched">
                  La hora de cierre es requerida
                </div>
              </div>
            </div>
            <div class="form-group checkbox">
              <input type="checkbox" id="cerrado" class="form-checkbox" formControlName="cerrado">
              <label class="checkbox-label" for="cerrado">La barbería está cerrada este día</label>
            </div>
            <div class="form-actions">
              <button type="button" class="btn btn-primary" (click)="guardarHorario()" [disabled]="cargando">
                {{ editandoId ? 'Actualizar' : 'Crear' }}
              </button>
              <button type="button" class="btn btn-secondary" (click)="cancelarEdicion()">
                Cancelar
              </button>
            </div>
          </form>
        </div>
      </section>

      <!-- Header with New Button -->
      <div class="admin-header" *ngIf="barberiaSeleccionada && !mostrarFormulario">
        <button class="btn btn-add" (click)="toggleFormulario()">
          <span>➕</span> Nuevo Horario
        </button>
      </div>

      <!-- Loading State -->
      <div class="loading-state" *ngIf="cargando">
        <div class="spinner"></div>
        <p>Cargando horarios...</p>
      </div>

      <!-- Items Grid -->
      <div class="items-grid" *ngIf="barberiaSeleccionada && !cargando && horariosFiltrados.length > 0">
        <div class="item-card" *ngFor="let horario of horariosFiltrados">
          <div class="card-header">
            <h3 class="card-title">{{ getNombreDia(horario.diaSemana) }}</h3>
            <span class="status-badge" [ngClass]="horario.cerrado ? 'status-inactiva' : 'status-activa'">
              {{ horario.cerrado ? 'Cerrado' : 'Abierto' }}
            </span>
          </div>
          <div class="card-body">
            <div class="card-detail" *ngIf="!horario.cerrado">
              <span class="detail-label">Apertura:</span>
              <span class="detail-value">{{ formatearHora(horario.horaInicio) }}</span>
            </div>
            <div class="card-detail" *ngIf="!horario.cerrado">
              <span class="detail-label">Cierre:</span>
              <span class="detail-value">{{ formatearHora(horario.horaFin) }}</span>
            </div>
            <div class="card-detail" *ngIf="horario.cerrado">
              <span class="detail-label">Estado:</span>
              <span class="detail-value">Barbería Cerrada</span>
            </div>
          </div>
          <div class="card-actions">
            <button class="action-btn action-edit" (click)="editarHorario(horario)" title="Editar">
              ✎ Editar
            </button>
          </div>
        </div>
      </div>

      <!-- No Results -->
      <div class="no-results" *ngIf="barberiaSeleccionada && !cargando && horariosFiltrados.length === 0">
        <svg class="no-results-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <h3>No hay horarios configurados</h3>
        <p>Crea los horarios de tu barbería</p>
      </div>

      <!-- Select Barbería Message -->
      <div class="no-results" *ngIf="!barberiaSeleccionada && !cargando">
        <svg class="no-results-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <h3>Selecciona una barbería</h3>
        <p>Para gestionar horarios, debes seleccionar una barbería primero</p>
      </div>
    </div>
  </section>
</div>